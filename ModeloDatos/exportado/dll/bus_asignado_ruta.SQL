--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 7.5.844
--   Created On : Martes, 20 Diciembre, 2011 
--   DBMS       : PostgreSQL 
--   -------------------------------------------------- 

DROP TABLE IF EXISTS bus_asignado_ruta;
CREATE TABLE bus_asignado_ruta ( 
	nombre_ruta varchar(10) NOT NULL,
	matricula varchar(10) NOT NULL,
	hora time NOT NULL,
	fecha date NOT NULL
);

ALTER TABLE bus_asignado_ruta ADD CONSTRAINT PK_bus_asignado_ruta 
	PRIMARY KEY (nombre_ruta, matricula, hora, fecha);


ALTER TABLE bus_asignado_ruta ADD CONSTRAINT FK_bus_asignado_ruta_bus 
	FOREIGN KEY (matricula) REFERENCES bus (matricula) 
ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE bus_asignado_ruta ADD CONSTRAINT FK_bus_asignado_ruta_ruta 
	FOREIGN KEY (nombre_ruta) REFERENCES ruta (nombre) 
ON DELETE CASCADE ON UPDATE CASCADE;