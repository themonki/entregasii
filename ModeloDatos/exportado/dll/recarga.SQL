--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 7.5.844
--   Created On : Martes, 20 Diciembre, 2011 
--   DBMS       : PostgreSQL 
--   -------------------------------------------------- 

DROP TABLE IF EXISTS recarga;
CREATE TABLE recarga ( 
	pin varchar(30) NOT NULL,
	id_estacion integer NOT NULL,
	fecha date NOT NULL,
	hora time NOT NULL,
	valor integer NOT NULL
);

ALTER TABLE recarga ADD CONSTRAINT PK_recarga 
	PRIMARY KEY (pin, id_estacion, fecha, hora);

ALTER TABLE recarga ADD CONSTRAINT FK_recarga_tarjeta
	FOREIGN KEY (pin) REFERENCES tarjeta (pin)
ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE recarga ADD CONSTRAINT FK_recarga_estacion_principal
	FOREIGN KEY (id_estacion) REFERENCES estacion_principal (id_estacion)
ON DELETE CASCADE ON UPDATE CASCADE;