--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 7.5.844
--   Created On : Martes, 20 Diciembre, 2011 
--   DBMS       : PostgreSQL 
--   -------------------------------------------------- 

DROP TABLE IF EXISTS tarjeta_uso_ruta;
CREATE TABLE tarjeta_uso_ruta ( 
	nombre varchar(10) NOT NULL,
	pin varchar(30) NOT NULL,
	fecha date NOT NULL,
	hora time NOT NULL
);

ALTER TABLE tarjeta_uso_ruta ADD CONSTRAINT PK_tarjeta_uso_ruta 
	PRIMARY KEY (nombre, pin, fecha, hora);

ALTER TABLE tarjeta_uso_ruta ADD CONSTRAINT FK_tarjeta_uso_ruta_ruta 
	FOREIGN KEY (nombre) REFERENCES ruta (nombre)
ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE tarjeta_uso_ruta ADD CONSTRAINT FK_tarjeta_uso_ruta_tarjeta 
	FOREIGN KEY (pin) REFERENCES tarjeta (pin)
ON DELETE CASCADE ON UPDATE CASCADE;

